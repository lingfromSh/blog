{"title":"服务网格","uid":"44e4ec9f11dd82491daf05435d1368ad","slug":"cloud-native/service-mesh","date":"2022-07-17T18:04:02.000Z","updated":"2022-08-16T08:21:58.286Z","comments":true,"path":"api/articles/cloud-native/service-mesh.json","keywords":null,"cover":null,"content":"<h1 id=\"服务网格\"><a href=\"#服务网格\" class=\"headerlink\" title=\"服务网格\"></a>服务网格</h1><h2 id=\"什么是服务网格\"><a href=\"#什么是服务网格\" class=\"headerlink\" title=\"什么是服务网格?\"></a>什么是服务网格?</h2><p>服务网格（例如开源项目 <a href=\"https://www.redhat.com/zh/topics/microservices/what-is-istio\">Istio</a>）用于控制应用的不同部分之间如何共享数据。与用于管理此类通信的其他系统不同，服务网格内置于应用程序中的专用基础架构层。这个可见的基础架构层可以记录应用的不同部分是否能正常交互。因此，随着应用的不断发展，它在优化通信和避免停机方面就显得更加有用。</p>\n<p>应用的每个部分——即”服务”，都要与其他服务相互协作，来为用户提供所需的内容。如果在线零售应用的用户想购买什么东西，他们得知道该商品是否有货。因此，负责与公司库存数据库通信的服务需要与产品网页进行通信，而产品网页本身，也需要与用户的在线购物车通信。为了增加业务价值，该零售商之后可能会推出一项新服务：在应用中为用户提供产品推荐。要推荐产品，这项新服务除了要与产品标签数据库进行通信外，还需要与产品页面所需的同一个库存数据库进行通信，因此这涉及到大量可重复使用的移动组件。</p>\n<p>现代应用常以这种方式拆分，所有组件构成一个服务网络，每一个都分别执行特定的业务功能。要执行相应的功能，一项服务可能需要向其他几项服务请求数据。但如果有些服务（例如零售商的库存数据库）遇到请求超载会怎样呢？这就要靠服务网格了，它会将请求从一项服务路由到下一项，从而优化所有移动组件的协同工作方式。</p>\n<h2 id=\"服务网格的关键因素\"><a href=\"#服务网格的关键因素\" class=\"headerlink\" title=\"服务网格的关键因素\"></a>服务网格的关键因素</h2><ul>\n<li>可靠性<br>  服务网格通过边车代理，保证容器、服务之间通信的高效和可靠</li>\n<li>可见性<br>  服务网格提供服务健康检查和行为监控。控制平面可以收集并统计服务的运行情况，包括服务的网络时延、网络状况、分布式追踪和日志。通常可以用到的工具有Prometheus,Elasticsearch,Grafana等</li>\n<li>安全<br>  服务网格可以自动加密服务间通信，执行分布式安全策略</li>\n</ul>\n<h2 id=\"服务网格的优点和劣势\"><a href=\"#服务网格的优点和劣势\" class=\"headerlink\" title=\"服务网格的优点和劣势\"></a>服务网格的优点和劣势</h2><h3 id=\"优点\"><a href=\"#优点\" class=\"headerlink\" title=\"优点\"></a>优点</h3><ul>\n<li>简化服务间通信给传统业务编码带来的不必要管理成本</li>\n<li>更容易诊断通信错误</li>\n<li>更容易实现安全，支持加密通信、鉴权和授权</li>\n<li>更快测试、发布、开发</li>\n<li>通过边车模式更加高效管理网络通信</li>\n</ul>\n<h3 id=\"劣势\"><a href=\"#劣势\" class=\"headerlink\" title=\"劣势\"></a>劣势</h3><ul>\n<li>运行服务网格本身需要增加服务运营成本</li>\n<li>增加了通信成本，因为每个服务都需要经由一个边车代理</li>\n<li>服务网格无法处理和其他服务和系统、传输转换等问题</li>\n<li>增加了管理成本。网络管理本身非常抽象困难且无法避免，团队中必须有人需要将服务网格适配进工作任务以及管理其配置</li>\n</ul>\n<h2 id=\"常见服务网格\"><a href=\"#常见服务网格\" class=\"headerlink\" title=\"常见服务网格\"></a>常见服务网格</h2><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>[CNCF Service Mesh Survey 2020]<a href=\"https://www.cncf.io/wp-content/uploads/2020/11/CNCF_Survey_Report_2020.pdf\">https://www.cncf.io/wp-content/uploads/2020/11/CNCF_Survey_Report_2020.pdf</a></p></blockquote>\n<ul>\n<li>AWS App Mesh</li>\n<li>Azure Service Fabric Mesh</li>\n<li>Buoyant Conduit</li>\n<li>F5 Nginx Service Mesh</li>\n<li>Google Anthos Service Mesh</li>\n<li>HashiCorp Consul</li>\n<li>Istio</li>\n<li>Kong Mesh</li>\n<li>Kuma</li>\n<li>Linkerd</li>\n<li>Red Hat OpenShift Service Mesh</li>\n<li>Gloo Mesh</li>\n<li>Tetrate</li>\n<li>Tigera Calico Cloud</li>\n<li>Traefik Labs</li>\n<li>VMware Tanzu Service Mesh</li>\n</ul>\n","text":"服务网格什么是服务网格?服务网格（例如开源项目 Istio）用于控制应用的不同部分之间如何共享数据。与用于管理此类通信的其他系统不同，服务网格内置于应用程序中的专用基础架构层。这个可见的基础架构层可以记录应用的不同部分是否能正常交互。因此，随着应用的不断发展，它在优化通信和避免停...","link":"","photos":[],"count_time":{"symbolsCount":"1.3k","symbolsTime":"1 mins."},"categories":[{"name":"cloud-native","slug":"cloud-native","count":7,"path":"api/categories/cloud-native.json"}],"tags":[{"name":"CloudNative","slug":"CloudNative","count":5,"path":"api/tags/CloudNative.json"},{"name":"ServiceMesh","slug":"ServiceMesh","count":2,"path":"api/tags/ServiceMesh.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E6%9C%8D%E5%8A%A1%E7%BD%91%E6%A0%BC\"><span class=\"toc-text\">服务网格</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BB%80%E4%B9%88%E6%98%AF%E6%9C%8D%E5%8A%A1%E7%BD%91%E6%A0%BC\"><span class=\"toc-text\">什么是服务网格?</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%9C%8D%E5%8A%A1%E7%BD%91%E6%A0%BC%E7%9A%84%E5%85%B3%E9%94%AE%E5%9B%A0%E7%B4%A0\"><span class=\"toc-text\">服务网格的关键因素</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%9C%8D%E5%8A%A1%E7%BD%91%E6%A0%BC%E7%9A%84%E4%BC%98%E7%82%B9%E5%92%8C%E5%8A%A3%E5%8A%BF\"><span class=\"toc-text\">服务网格的优点和劣势</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BC%98%E7%82%B9\"><span class=\"toc-text\">优点</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%8A%A3%E5%8A%BF\"><span class=\"toc-text\">劣势</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%B8%B8%E8%A7%81%E6%9C%8D%E5%8A%A1%E7%BD%91%E6%A0%BC\"><span class=\"toc-text\">常见服务网格</span></a></li></ol></li></ol>","author":{"name":"Stephen Ling","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"Think twice, code once!","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Tekton 云原生CICD流水线","uid":"268900bf172135516a6461e1227a0474","slug":"cloud-native/tekton","date":"2022-07-17T18:07:55.000Z","updated":"2022-08-16T08:21:58.286Z","comments":true,"path":"api/articles/cloud-native/tekton.json","keywords":null,"cover":null,"text":"Tekton核心概念Step - 步骤一个步骤代表一个容器，去执行命令并输出结果 steps: - name: deploy-app image: foo&#x2F;base-image:2.7 env: - name: API_KEY valueFrom: secretKeyR...","link":"","photos":[],"count_time":{"symbolsCount":"1k","symbolsTime":"1 mins."},"categories":[{"name":"cloud-native","slug":"cloud-native","count":7,"path":"api/categories/cloud-native.json"}],"tags":[{"name":"CloudNative","slug":"CloudNative","count":5,"path":"api/tags/CloudNative.json"},{"name":"Tekton","slug":"Tekton","count":1,"path":"api/tags/Tekton.json"},{"name":"Pipeline","slug":"Pipeline","count":1,"path":"api/tags/Pipeline.json"}],"author":{"name":"Stephen Ling","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"Think twice, code once!","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{}}