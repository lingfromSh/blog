{"title":"K8S - Endpoint","uid":"4ca1f34c3818e2813c915142c2347359","slug":"cloud-native/k8s-endpoint","date":"2022-07-19T15:42:05.000Z","updated":"2022-08-16T08:21:58.286Z","comments":true,"path":"api/articles/cloud-native/k8s-endpoint.json","keywords":null,"cover":null,"content":"<h1 id=\"K8S-Endpoint\"><a href=\"#K8S-Endpoint\" class=\"headerlink\" title=\"K8S Endpoint\"></a>K8S Endpoint</h1><h2 id=\"作用\"><a href=\"#作用\" class=\"headerlink\" title=\"作用\"></a>作用</h2><p>Endpoint用于定义服务入口，这个入口既可以是k8s内部服务，也可以是外部服务。<br>Endpoint一般和Service一起配套使用。</p>\n<p>当Service通过selector绑定deployment或者statefulset时，都会自动生成一份相同名字的Endpoint。<br>但是当管理外部服务的时候，就需要我们自己手动创建了。</p>\n<h2 id=\"手动管理Endpoint的使用场景\"><a href=\"#手动管理Endpoint的使用场景\" class=\"headerlink\" title=\"手动管理Endpoint的使用场景\"></a>手动管理Endpoint的使用场景</h2><p>考虑到K8S调度有状态服务的能力，以及涉及到一些特殊硬件设备的服务，一般他们都会被部署到外部独立管理，所以为了用集群的能力去管理则需要Endpoint去管理他们。</p>\n<pre class=\"line-numbers language-yaml\" data-language=\"yaml\"><code class=\"language-yaml\">apiVersion: v1\nkind: Service\nmetadata:\n  name: external-service\nspec:\n  ports:\n    - name: web\n      port: 80 \n      targetPort: 80 # 非必须\n---\napiVersion: v1\nkind: Endpoint\nmetadata:\n  name: external-service\nspec:\n  addresses:\n    - ip: xxx.xxx.xxx.xxx\n  ports:\n    - name: web  # 此处必须和Service中定义的保持一致\n      port: 80   # 此处必须和Service中定义的保持一致</code></pre>\n","text":"K8S Endpoint作用Endpoint用于定义服务入口，这个入口既可以是k8s内部服务，也可以是外部服务。Endpoint一般和Service一起配套使用。 当Service通过selector绑定deployment或者statefulset时，都会自动生成一份相同名字的...","link":"","photos":[],"count_time":{"symbolsCount":616,"symbolsTime":"1 mins."},"categories":[{"name":"cloud-native","slug":"cloud-native","count":7,"path":"api/categories/cloud-native.json"}],"tags":[{"name":"Kubernetes","slug":"Kubernetes","count":1,"path":"api/tags/Kubernetes.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#K8S-Endpoint\"><span class=\"toc-text\">K8S Endpoint</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BD%9C%E7%94%A8\"><span class=\"toc-text\">作用</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%89%8B%E5%8A%A8%E7%AE%A1%E7%90%86Endpoint%E7%9A%84%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF\"><span class=\"toc-text\">手动管理Endpoint的使用场景</span></a></li></ol></li></ol>","author":{"name":"Stephen Ling","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"Think twice, code once!","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Grafana + Loki + Promtail + Prometheus + Traefik - 监控服务指标以及日志告警","uid":"701588241f5ca3e17bd8d90ee80a988d","slug":"cloud-native/grafana","date":"2022-07-20T07:46:39.000Z","updated":"2022-08-16T08:21:58.283Z","comments":true,"path":"api/articles/cloud-native/grafana.json","keywords":null,"cover":[],"text":"监控服务指标以及日志告警 示例仓库地址: Github 通过收集服务日志以及服务指标，设置相应的监控规则，监控服务响应异常，网络异常，磁盘异常等。 做到及时响应的同时，快速定位问题。 0. 国内防火墙问题将PROXY传入k3s容器内，同时配置docker daemon的PROXY...","link":"","photos":[],"count_time":{"symbolsCount":"1.4k","symbolsTime":"1 mins."},"categories":[{"name":"cloud-native","slug":"cloud-native","count":7,"path":"api/categories/cloud-native.json"}],"tags":[{"name":"CloudNative","slug":"CloudNative","count":5,"path":"api/tags/CloudNative.json"},{"name":"Grafana","slug":"Grafana","count":1,"path":"api/tags/Grafana.json"},{"name":"Loki","slug":"Loki","count":1,"path":"api/tags/Loki.json"},{"name":"Promtail","slug":"Promtail","count":1,"path":"api/tags/Promtail.json"},{"name":"Prometheus","slug":"Prometheus","count":1,"path":"api/tags/Prometheus.json"},{"name":"Traefik","slug":"Traefik","count":1,"path":"api/tags/Traefik.json"}],"author":{"name":"Stephen Ling","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"Think twice, code once!","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Tekton 云原生CICD流水线","uid":"268900bf172135516a6461e1227a0474","slug":"cloud-native/tekton","date":"2022-07-17T18:07:55.000Z","updated":"2022-08-16T08:21:58.286Z","comments":true,"path":"api/articles/cloud-native/tekton.json","keywords":null,"cover":null,"text":"Tekton核心概念Step - 步骤一个步骤代表一个容器，去执行命令并输出结果 steps: - name: deploy-app image: foo&#x2F;base-image:2.7 env: - name: API_KEY valueFrom: secretKeyR...","link":"","photos":[],"count_time":{"symbolsCount":"1k","symbolsTime":"1 mins."},"categories":[{"name":"cloud-native","slug":"cloud-native","count":7,"path":"api/categories/cloud-native.json"}],"tags":[{"name":"CloudNative","slug":"CloudNative","count":5,"path":"api/tags/CloudNative.json"},{"name":"Tekton","slug":"Tekton","count":1,"path":"api/tags/Tekton.json"},{"name":"Pipeline","slug":"Pipeline","count":1,"path":"api/tags/Pipeline.json"}],"author":{"name":"Stephen Ling","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"Think twice, code once!","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}