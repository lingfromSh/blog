{"title":"Tekton 云原生CICD流水线","uid":"268900bf172135516a6461e1227a0474","slug":"cloud-native/tekton","date":"2022-07-17T18:07:55.000Z","updated":"2022-08-16T08:21:58.286Z","comments":true,"path":"api/articles/cloud-native/tekton.json","keywords":null,"cover":null,"content":"<h1 id=\"Tekton\"><a href=\"#Tekton\" class=\"headerlink\" title=\"Tekton\"></a>Tekton</h1><h2 id=\"核心概念\"><a href=\"#核心概念\" class=\"headerlink\" title=\"核心概念\"></a>核心概念</h2><h3 id=\"Step-步骤\"><a href=\"#Step-步骤\" class=\"headerlink\" title=\"Step - 步骤\"></a>Step - 步骤</h3><p>一个步骤代表一个容器，去执行命令并输出结果</p>\n<pre class=\"line-numbers language-yaml\" data-language=\"yaml\"><code class=\"language-yaml\">steps:\n  - name: deploy-app\n  \timage: foo&#x2F;base-image:2.7\n\tenv:\t\n\t  - name: API_KEY\n\t    valueFrom: \n\t\t  secretKeyRef:\n\t\t    name: secure-properties\n\t\t\tkey: apiKey\n\tscript: |\n\t  cloud login -a $(params.api-url)</code></pre>\n\n<h3 id=\"Task-任务\"><a href=\"#Task-任务\" class=\"headerlink\" title=\"Task - 任务\"></a>Task - 任务</h3><p>一个任务代表一系列步骤的集合</p>\n<pre class=\"line-numbers language-yaml\" data-language=\"yaml\"><code class=\"language-yaml\">apiVersion: tekton.dev&#x2F;v1beta1\nkind: Task\nmetadata:\n  name: deploy-to-my-awesome-cloud\nspec:\n  params:\n  \t- name: api-url\n\t  default: cloud.com\n  steps:\n    - name: deploy-app\n\t  image: foo&#x2F;base-image:2.7\n\t  env:\t\n\t    - name: API_KEY\n\t\t  valueFrom: \n\t\t    secretKeyRef:\n\t\t\t  name: secure-properties\n\t\t\t  key: apiKey\n\t  script: |\n\t    cloud login -a $(params.api-url)</code></pre>\n\n<h3 id=\"Pipeline-流水线\"><a href=\"#Pipeline-流水线\" class=\"headerlink\" title=\"Pipeline - 流水线\"></a>Pipeline - 流水线</h3><p>一条流水线代表一系列任务的集合</p>\n<pre class=\"line-numbers language-yaml\" data-language=\"yaml\"><code class=\"language-yaml\">apiVersion: tekton.dev&#x2F;v1beta1\nkind: Pipeline\nmetadata:\n  name: project-pipeline\nspec:\n  params:\n    - name: api-url\n\t- name: cloud-region\n  tasks:\n    - name: clone\n\t  taskRef:\n\t    name: git-clone\n    - name: build\n\t  taskRef:\n\t    name: build\n\t  runAfter:\n\t  \t- clone\n\t- name: deploy\n\t  taskRef:\n\t    name: deploy\n      runAfter:\n\t  \t- build</code></pre>","text":"Tekton核心概念Step - 步骤一个步骤代表一个容器，去执行命令并输出结果 steps: - name: deploy-app image: foo&#x2F;base-image:2.7 env: - name: API_KEY valueFrom: secretKeyR...","link":"","photos":[],"count_time":{"symbolsCount":"1k","symbolsTime":"1 mins."},"categories":[{"name":"cloud-native","slug":"cloud-native","count":7,"path":"api/categories/cloud-native.json"}],"tags":[{"name":"CloudNative","slug":"CloudNative","count":5,"path":"api/tags/CloudNative.json"},{"name":"Tekton","slug":"Tekton","count":1,"path":"api/tags/Tekton.json"},{"name":"Pipeline","slug":"Pipeline","count":1,"path":"api/tags/Pipeline.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Tekton\"><span class=\"toc-text\">Tekton</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5\"><span class=\"toc-text\">核心概念</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Step-%E6%AD%A5%E9%AA%A4\"><span class=\"toc-text\">Step - 步骤</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Task-%E4%BB%BB%E5%8A%A1\"><span class=\"toc-text\">Task - 任务</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Pipeline-%E6%B5%81%E6%B0%B4%E7%BA%BF\"><span class=\"toc-text\">Pipeline - 流水线</span></a></li></ol></li></ol></li></ol>","author":{"name":"Stephen Ling","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"Think twice, code once!","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"K8S - Endpoint","uid":"4ca1f34c3818e2813c915142c2347359","slug":"cloud-native/k8s-endpoint","date":"2022-07-19T15:42:05.000Z","updated":"2022-08-16T08:21:58.286Z","comments":true,"path":"api/articles/cloud-native/k8s-endpoint.json","keywords":null,"cover":null,"text":"K8S Endpoint作用Endpoint用于定义服务入口，这个入口既可以是k8s内部服务，也可以是外部服务。Endpoint一般和Service一起配套使用。 当Service通过selector绑定deployment或者statefulset时，都会自动生成一份相同名字的...","link":"","photos":[],"count_time":{"symbolsCount":616,"symbolsTime":"1 mins."},"categories":[{"name":"cloud-native","slug":"cloud-native","count":7,"path":"api/categories/cloud-native.json"}],"tags":[{"name":"Kubernetes","slug":"Kubernetes","count":1,"path":"api/tags/Kubernetes.json"}],"author":{"name":"Stephen Ling","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"Think twice, code once!","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"服务网格","uid":"44e4ec9f11dd82491daf05435d1368ad","slug":"cloud-native/service-mesh","date":"2022-07-17T18:04:02.000Z","updated":"2022-08-16T08:21:58.286Z","comments":true,"path":"api/articles/cloud-native/service-mesh.json","keywords":null,"cover":null,"text":"服务网格什么是服务网格?服务网格（例如开源项目 Istio）用于控制应用的不同部分之间如何共享数据。与用于管理此类通信的其他系统不同，服务网格内置于应用程序中的专用基础架构层。这个可见的基础架构层可以记录应用的不同部分是否能正常交互。因此，随着应用的不断发展，它在优化通信和避免停...","link":"","photos":[],"count_time":{"symbolsCount":"1.3k","symbolsTime":"1 mins."},"categories":[{"name":"cloud-native","slug":"cloud-native","count":7,"path":"api/categories/cloud-native.json"}],"tags":[{"name":"CloudNative","slug":"CloudNative","count":5,"path":"api/tags/CloudNative.json"},{"name":"ServiceMesh","slug":"ServiceMesh","count":2,"path":"api/tags/ServiceMesh.json"}],"author":{"name":"Stephen Ling","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"Think twice, code once!","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}